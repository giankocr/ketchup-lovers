<?php
/**
* Shortcode para mostrar un menú inferior fijo de estilo 'Tomate'.
*
* Uso: [ menu_inferior_tomate ]
*/

function mi_shortcode_menu_inferior_tomate() {

    // Se utiliza el búfer de salida para capturar todo el HTML y CSS.
    ob_start();
    ?>

    <!-- 3. ESTRUCTURA HTML DEL MENÚ -->
    <div class = 'menu-ketchup-container' id = 'menukernstomate'>
    <div class = 'menu-ketchup-wrapper'>
    <!-- Icono del tomate -->
    <svg viewBox = '0 0 822 1031' id = 'tomatecayendo' style="z-index:revert;z-index: 99;" class = 'tomatecayendo' xmlns = 'http://www.w3.org/2000/svg' fill-rule = 'evenodd' clip-rule = 'evenodd' stroke-linejoin = 'round' stroke-miterlimit = '2'>
    <path d = 'M821.286 620.097c0 226.6-183.7 410.3-410.3 410.3-226.6 0-410.3-183.7-410.3-410.3 0-226.6 183.7-410.3 410.3-410.3 226.6 0 410.3 183.7 410.3 410.3' fill = 'red' fill-rule = 'nonzero'/>
    <path d = 'M662.078 291.33c-4.25-3.3-8.592-6.491-13.025-9.575a310.29 310.29 0 00-27.584-17.075 317.534 317.534 0 00-29.358-14.2 323.606 323.606 0 00-46.717-15.641c-.058-.017-.116-.025-.175-.042 24.159-2.858 48-8.175 70.934-15.808a345.793 345.793 0 0038.216-15.325c.342-.159.675-.35.984-.567.625-.433 1.141-.983 1.425-1.642.141-.333.216-.691.225-1.075 0-1.291-1.084-2.25-2.517-2.025-12.058 1.867-24.075 1.909-36.083 1.067-11.617-.817-23.217-2.458-34.817-4.075-12.375-1.725-24.75-3.408-37.142-4.025-6-.292-12.008-.342-18.016-.017-6.009.325-12.025 1.025-18.05 2.209-4.725.933-9.375 2.166-13.884 3.733-4.508 1.575-8.875 3.475-13.041 5.733.85-2.158 1.766-4.283 2.766-6.383 6.967-14.675 17.567-27.75 31.042-37.85.508-.383 1.033-.858 1.4-1.408.183-.275.333-.567.417-.867.083-.308.108-.633.058-.975a1.947 1.947 0 00-.867-1.333 2.33 2.33 0 00-1.641-.342c-24.65 3.725-49.284 12.925-69.809 26.808 2.85-13.35 4.834-27 5.059-40.358.483-28.95-1.767-58.817-10.084-87.091-.85-2.884-1.85-6.55-3.066-10.6-3.659-12.167-9.259-27.825-18.467-36.359-4.092-3.791-8.9-6.175-14.567-6.216a26.396 26.396 0 00-4.441.358c-2.925.483-5.775 1.425-8.467 2.675a41.713 41.713 0 00-3.908 2.083 67.096 67.096 0 00-5.734 3.9c-.125.092-.25.175-.375.267a55.322 55.322 0 00-4.833 4.183c-.092.092-.208.167-.3.259a.118.118 0 01-.017.05c-2.958 2.916-5.416 6.066-7.233 9.425.008-.025.017-.042.017-.067-.092.175-.159.358-.25.533a32.946 32.946 0 00-1.192 2.517c-.133.325-.242.65-.367.983-.283.75-.541 1.509-.766 2.275-.109.384-.192.784-.292 1.175-.175.725-.325 1.45-.433 2.184-.067.433-.125.858-.167 1.291a26.97 26.97 0 00-.15 2.175c-.008.45-.017.909-.008 1.367.016.725.075 1.458.15 2.2.041.467.083.933.158 1.408.117.75.283 1.509.458 2.275.109.459.192.925.325 1.384.234.833.534 1.675.842 2.516.15.4.267.809.433 1.217a39.393 39.393 0 001.784 3.775c5.825 10.75 12.275 20.833 18.316 31.108 6.05 10.275 11.7 20.733 15.934 32.233 5.716 15.55 10.358 31.609 12.458 47.967.3 2.333.55 4.675.742 7.025.191 2.35.316 4.692.383 7.033a119.811 119.811 0 01-1.075 19.384c-3.167-3.875-6.9-7.375-11.05-10.434-5.917-4.366-12.6-7.866-19.342-10.458-2.633-1.008-5.3-1.85-7.991-2.608-.842-.234-1.684-.425-2.534-.642a95.662 95.662 0 00-5.708-1.283c-.942-.184-1.892-.359-2.842-.517a113.733 113.733 0 00-5.825-.8c-.841-.1-1.683-.208-2.525-.292a139.465 139.465 0 00-7.925-.508c-.116 0-.233-.017-.35-.017h.017c-7.433-.225-14.908.109-22.325.817-6.25.6-12.442 1.508-18.608 2.508-6.525.425-13.05 1.459-19.284 3.242-2.408.692-3.5 5.5-.1 4.783 1.617-.375 3.234-.708 4.859-1.016l.625-.125c12.633-2.334 25.325-2.692 38.15-.5 14.566 2.483 28.25 7.991 40.575 15.591a84.419 84.419 0 014.841 3.242c-1.9-.7-3.833-1.317-5.833-1.85-7.625-2.042-15.442-3.042-23.35-3.408-17.058-.792-34.3.85-51.108 3.408-17.45 2.667-34.692 6.675-51.417 12.017-16.583 5.3-32.383 12.15-48.1 19.341-17.458 7.992-35.133 16.059-54.067 20.542-.85.2-1.841.875-2.533 1.692l-.008-.009c-.042.05-.067.109-.1.15-.15.192-.267.375-.367.575-.058.1-.1.192-.133.292a2.33 2.33 0 00-.134.567c-.008.1-.025.2-.016.3.016.191.083.375.175.558.041.083.058.175.116.25.192.258.45.492.834.692 25.441 13.333 55.825 12.966 83.5 6.766 11.766-2.633 23.233-6.208 34.625-9.991 7.591-2.517 15.15-5.134 22.758-7.625 3.8-1.25 7.608-2.467 11.442-3.617 7.658-2.317 15.391-4.408 23.275-6.05 5.783-1.2 11.625-2.158 17.5-2.775 3.916-.417 7.841-.675 11.766-.767 5.9-.133 11.792.134 17.659.884-1.734.9-3.434 1.858-5.142 2.8a233.21 233.21 0 00-23.275 14.658c-.25.183-.5.358-.75.533a232.706 232.706 0 00-10.183 7.775c-.067.05-.125.109-.192.159a227.544 227.544 0 00-8.733 7.508 146.94 146.94 0 00-2.05 1.858c-2.9 2.684-5.759 5.417-8.509 8.242-18.916 19.433-34.2 41.95-44.733 66.317a199.552 199.552 0 00-4.158 10.425 199.871 199.871 0 00-8.875 32.3 2.308 2.308 0 00-.009.925c0-.017.009-.034.009-.05.175.991 1.05 1.375 2.075 1.325v.008c.016 0 .041-.017.066-.017a4.438 4.438 0 001.675-.45c.025-.008.034-.025.059-.033.533-.275 1-.633 1.283-1.075 28.267-44.508 72.308-77.233 117.558-105.867 5.625-3.558 11.3-7.05 16.992-10.525 5.183-3.15 10.392-6.283 15.6-9.408 1.208-.725 2.417-1.458 3.633-2.192 1.234 2.025 2.342 4.117 3.5 6.175 1.159 2.075 2.317 4.159 3.392 6.275.7 1.384 1.35 2.8 2.017 4.2 1.016 2.134 2.025 4.275 2.958 6.442.625 1.458 1.183 2.933 1.767 4.408.85 2.15 1.708 4.292 2.475 6.467.55 1.583 1.033 3.183 1.541 4.775.675 2.1 1.375 4.2 1.967 6.325.492 1.75.883 3.517 1.317 5.283.5 2 1.025 3.992 1.45 6.009.416 1.991.725 3.991 1.075 6 .316 1.816.683 3.625.941 5.45.334 2.4.542 4.808.784 7.216.141 1.459.35 2.909.458 4.367.283 3.883.45 7.775.467 11.667.016 3.433-.109 6.866-.317 10.291-.025.484-.05.967-.083 1.442a190.98 190.98 0 01-1 10.45c-.109.908-.242 1.817-.367 2.733-.117.884-.217 1.767-.35 2.65-.558 3.634 4.675 2.317 5.617-.05.825-2.058 1.658-4.125 2.483-6.191 1.65-4.142 3.3-8.3 4.908-12.475a570.938 570.938 0 002.392-6.275c3.142-8.392 6.092-16.859 8.625-25.409 2.533-8.55 4.658-17.183 6.133-25.916 1.475-8.734 2.309-17.559 2.275-26.484a121.895 121.895 0 00-.4-9.4 121.584 121.584 0 00-1.141-9.341 137.985 137.985 0 006.158 5.5c14.767 12.45 32.192 22.141 50.975 28.291a156.976 156.976 0 0028.9 6.542 149.9 149.9 0 009.875.933c15.375.942 30.775-.4 46.125-1.2 6.467-.333 12.992-.575 19.5-.475 10.842.167 21.633 1.275 32.017 4.417.316.092.658.117 1.025.083 1.458-.125 3.166-1.175 3.908-2.4.558-.925.583-1.941-.458-2.75' fill = '#4e9839' fill-rule = 'nonzero'/>
    </svg>

    <nav class='nav-ketchup' role="navigation" aria-label="Menú principal de navegación">
        <!-- Opción 1: Inicio -->
         <?php
         if( is_user_logged_in() ){
            $url = '/home';
         }else{
            $url = '/ingresar';
         }
         ?>
        <a href="<?php echo esc_url( home_url( $url ) ); ?>" 
           class='menu-item' 
           id='registro-menu-item'
           role="menuitem"
           aria-label="Ir a página de registro de usuario"
           tabindex="0">
            <div class='icon-background' aria-hidden="true">
                <img src='<?php echo THEME_URI; ?>/assets/images/home_menu.svg' 
                     alt='' 
                     role="presentation">
            </div>
            <span><?php if( is_user_logged_in() ){ echo 'Inicio'; }else{ echo 'Registrate'; } ?></span>
        </a>

        <div class='tomate-icon-path' aria-hidden="true">
            <img src='<?php echo THEME_URI; ?>/assets/images/tomate_menu.svg' 
                 class='tomate-icon-menu' 
                 alt='' 
                 role="presentation">
        </div>
        
        <!-- Opción 2: Registrar Factura ( Central ) -->
        <a href='https://api.whatsapp.com/send/?phone=50622370505&text=subir+factura&type=phone_number&app_absent=0' 
           class='menu-item-center' 
           id='register-invoice-menu-item'
           role="menuitem"
           aria-label="Cargar facturas para obtener puntos"
           tabindex="0">
            <div class='center-icon-wrapper' aria-hidden="true">
                <img src='<?php echo THEME_URI; ?>/assets/images/WA.svg' 
                     id='whatsapp_menu' 
                     alt='' 
                     role="presentation">
            </div>
            <span class='text-menu-center'>Cargar Facturas</span>
        </a>

        <!-- Opción 3: Canjear Puntos -->
        <a href='<?php echo esc_url( home_url( '/tienda' ) ); ?>' 
           class='menu-item' 
           id='redeem-points-menu-item'
           role="menuitem"
           aria-label="Ir a la tienda para canjear puntos por productos"
           tabindex="0">
            <div class='icon-background' aria-hidden="true">
                <img src='<?php echo THEME_URI; ?>/assets/images/KL.svg' 
                     alt='' 
                     role="presentation">
            </div>
            <span>Canjea tus puntos</span>
        </a>
    </nav>
    </div>
    </div>

    <?php
    // Devuelve el contenido del búfer.
    return ob_get_clean();
}

// Registra el shortcode en WordPress.
add_shortcode( 'menu_inferior_tomate', 'mi_shortcode_menu_inferior_tomate' );

